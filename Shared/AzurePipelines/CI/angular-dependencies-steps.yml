parameters:
  artifactName: ''
  packageManager: 'yarn'
  projectRoot: ''

steps:
  - script: |
      ${{parameters.packageManager}} i
    workingDirectory: ${{parameters.projectRoot}}
    displayName: '${{parameters.packageManager}} install'

  - script: |
      ${{parameters.packageManager}} run lint
    workingDirectory: ${{parameters.projectRoot}}
    displayName: '${{parameters.packageManager}} run lint'

  - script: |
      zip --symlinks -r $(Build.ArtifactStagingDirectory)/project.zip ./*
    displayName: 'zip project'
    workingDirectory: ${{parameters.projectRoot}}

  - publish: $(Build.ArtifactStagingDirectory)
    artifact: ${{parameters.artifactName}}
