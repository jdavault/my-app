parameters:
  fileName: ''
  projectName: ''
  terragruntRoot: ''

steps:
  - task: DownloadPipelineArtifact@2
    inputs:
      artifactName: '${{parameters.projectName}}'
      targetPath: '$(Pipeline.Workspace)/${{parameters.projectName}}'
  - script: |
      cp $(Pipeline.Workspace)/${{parameters.projectName}}/${{parameters.fileName}} \
         ${{parameters.terragruntRoot}}
    displayName: 'Copy ${{parameters.fileName}} artifact into terragrunt directory.'
  - script: |
      cp $(Pipeline.Workspace)/${{parameters.projectName}}/${{parameters.fileName}} \
         $(Build.ArtifactStagingDirectory)
    displayName: 'Copy ${{parameters.fileName}} artifact into artifact staging directory.'
